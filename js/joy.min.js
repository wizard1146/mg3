var JoyStick=function(t,e,i){let o={xPosition:0,yPosition:0,x:0,y:0,cardinalDirection:"C"};var n=void 0===(e=e||{}).title?"joystick":e.title,r=void 0===e.width?0:e.width,d=void 0===e.height?0:e.height,a=void 0===e.internalFillColor?"#00AA00":e.internalFillColor,h=void 0===e.internalLineWidth?2:e.internalLineWidth,c=void 0===e.internalStrokeColor?"#003300":e.internalStrokeColor,s=void 0===e.externalLineWidth?2:e.externalLineWidth,f=void 0===e.externalStrokeColor?"#008000":e.externalStrokeColor,l=void 0===e.autoReturnToCenter||e.autoReturnToCenter;i=i||function(t){};var u=document.getElementById(t);u.style.touchAction="none";var g=document.createElement("canvas");g.id=n,0===r&&(r=u.clientWidth),0===d&&(d=u.clientHeight),g.width=r,g.height=d,u.appendChild(g);var x=g.getContext("2d"),v=0,P=2*Math.PI,m=(g.width-(g.width/2+10))/2,C=m+5,p=m+30,y=g.width/2,w=g.height/2,L=g.width/10,F=-1*L,E=g.height/10,S=-1*E,T=y,k=w;function W(){x.beginPath(),x.arc(y,w,p,0,P,!1),x.lineWidth=s,x.strokeStyle=f,x.stroke()}function D(){x.beginPath(),T<m&&(T=C),T+m>g.width&&(T=g.width-C),k<m&&(k=C),k+m>g.height&&(k=g.height-C),x.arc(T,k,m,0,P,!1);var t=x.createRadialGradient(y,w,5,y,w,200);t.addColorStop(0,a),t.addColorStop(1,c),x.fillStyle=t,x.fill(),x.lineWidth=h,x.strokeStyle=c,x.stroke()}"ontouchstart"in document.documentElement?(g.addEventListener("touchstart",(function(t){v=1,G=t.targetTouches[0].identifier}),!1),document.addEventListener("touchmove",(function(t){1===v&&t.targetTouches[0].target===g&&(T=t.targetTouches[0].pageX,k=t.targetTouches[0].pageY,"BODY"===g.offsetParent.tagName.toUpperCase()?(T-=g.offsetLeft,k-=g.offsetTop):(T-=g.offsetParent.offsetLeft,k-=g.offsetParent.offsetTop),x.clearRect(0,0,g.width,g.height),W(),D(),o.xPosition=T,o.yPosition=k,o.x=((T-y)/C*100).toFixed(),o.y=((k-w)/C*100*-1).toFixed(),o.cardinalDirection=R(),i(o))}),!1),document.addEventListener("touchend",(function(t){if(t.changedTouches[0].identifier!==G)return;v=0,l&&(T=y,k=w);x.clearRect(0,0,g.width,g.height),W(),D(),o.xPosition=T,o.yPosition=k,o.x=((T-y)/C*100).toFixed(),o.y=((k-w)/C*100*-1).toFixed(),o.cardinalDirection=R(),i(o)}),!1)):(g.addEventListener("mousedown",(function(t){v=1}),!1),document.addEventListener("mousemove",(function(t){1===v&&(T=t.pageX,k=t.pageY,"BODY"===g.offsetParent.tagName.toUpperCase()?(T-=g.offsetLeft,k-=g.offsetTop):(T-=g.offsetParent.offsetLeft,k-=g.offsetParent.offsetTop),x.clearRect(0,0,g.width,g.height),W(),D(),o.xPosition=T,o.yPosition=k,o.x=((T-y)/C*100).toFixed(),o.y=((k-w)/C*100*-1).toFixed(),o.cardinalDirection=R(),i(o))}),!1),document.addEventListener("mouseup",(function(t){v=0,l&&(T=y,k=w);x.clearRect(0,0,g.width,g.height),W(),D(),o.xPosition=T,o.yPosition=k,o.x=((T-y)/C*100).toFixed(),o.y=((k-w)/C*100*-1).toFixed(),o.cardinalDirection=R(),i(o)}),!1)),W(),D();let G=null;function R(){let t="",e=T-y,i=k-w;return i>=S&&i<=E&&(t="C"),i<S&&(t="N"),i>E&&(t="S"),e<F&&("C"===t?t="W":t+="W"),e>L&&("C"===t?t="E":t+="E"),t}this.GetWidth=function(){return g.width},this.GetHeight=function(){return g.height},this.GetPosX=function(){return T},this.GetPosY=function(){return k},this.GetX=function(){return((T-y)/C*100).toFixed()},this.GetY=function(){return((k-w)/C*100*-1).toFixed()},this.GetDir=function(){return R()}};